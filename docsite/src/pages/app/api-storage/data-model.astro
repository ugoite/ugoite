---
import BaseLayout from "../../../layouts/BaseLayout.astro";

const toc = [
  { id: "overview", title: "Overview" },
  { id: "tree", title: "Folder Structure" },
  { id: "links", title: "Source Specs" },
];

const tree = `spaces/
  {space_id}/
    meta.json
    settings.json
    forms/
    assets/
      {hash}.{ext}
    materialized_views/
    sql_sessions/
      {session_id}/
        meta.json`;
---

<BaseLayout title="Data Model | Ugoite Docsite" description="Data model and space directory structure." toc={toc}>
  <section id="overview" class="doc-card doc-card-hero">
    <span class="doc-pill">docs/spec/data-model</span>
    <h1 class="mt-3 text-3xl font-bold">データモデル</h1>
    <p class="mt-2 text-sm" style="color: var(--doc-muted);">ポータブルな space directory を基準に、Iceberg/OpenDAL 管理領域を分離して設計します。</p>
  </section>

  <section id="tree" class="doc-card">
    <h2 class="text-xl font-semibold">フォルダ構造（グラフィカル表示）</h2>
    <pre class="doc-tree mt-3">{tree}</pre>
    <p class="mt-3 text-sm" style="color: var(--doc-muted);">`forms/` 以下は Iceberg 管理領域のため固定レイアウトを仕様化せず、論理テーブル契約を優先します。</p>
  </section>

  <section id="links" class="doc-card">
    <h2 class="text-xl font-semibold">ソース仕様</h2>
    <ul class="mt-3 list-disc space-y-2 pl-5 text-sm" style="color: var(--doc-muted);">
      <li><a href="/docs/spec/data-model/overview">overview.md</a></li>
      <li><a href="/docs/spec/data-model/directory-structure">directory-structure.md</a></li>
      <li><a href="/docs/spec/data-model/file-schemas">file-schemas.yaml</a></li>
      <li><a href="/docs/spec/data-model/sql-sessions">sql-sessions.md</a></li>
    </ul>
  </section>
</BaseLayout>
